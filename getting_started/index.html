
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://ixpantia.github.io/faucet/getting_started/">
      
      
        <link rel="prev" href="../install/">
      
      
        <link rel="next" href="../options/">
      
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.5.3, mkdocs-material-9.5.8">
    
    
      
        <title>Getting Started - faucet</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.f2e4d321.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../stylesheets/extra.css">
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="faucet" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#quick-start" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="faucet" class="md-header__button md-logo" aria-label="faucet" data-md-component="logo">
      
  <img src="../figures/faucet.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            faucet
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Getting Started
            
          </span>
        </div>
      </div>
    </div>
    
      
    
    
    
      <div class="md-header__option">
  <div class="md-select">
    
    <button class="md-header__button md-icon" aria-label="Select language">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m12.87 15.07-2.54-2.51.03-.03A17.52 17.52 0 0 0 14.07 6H17V4h-7V2H8v2H1v2h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11.76-2.04M18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2l-4.5-12m-2.62 7 1.62-4.33L19.12 17h-3.24Z"/></svg>
    </button>
    <div class="md-select__inner">
      <ul class="md-select__list">
        
          <li class="md-select__item">
            <a href="./" hreflang="en" class="md-select__link">
              English
            </a>
          </li>
        
          <li class="md-select__item">
            <a href="../es/getting_started/" hreflang="es" class="md-select__link">
              Español
            </a>
          </li>
        
      </ul>
    </div>
  </div>
</div>
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/ixpantia/faucet" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="faucet" class="md-nav__button md-logo" aria-label="faucet" data-md-component="logo">
      
  <img src="../figures/faucet.png" alt="logo">

    </a>
    faucet
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/ixpantia/faucet" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Home
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../install/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Installation
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    Getting Started
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    Getting Started
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#quick-start" class="md-nav__link">
    <span class="md-ellipsis">
      Quick Start
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#running-a-shiny-application" class="md-nav__link">
    <span class="md-ellipsis">
      Running a Shiny Application
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#running-a-quarto-application" class="md-nav__link">
    <span class="md-ellipsis">
      Running a Quarto Application
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#running-a-fastapi-application" class="md-nav__link">
    <span class="md-ellipsis">
      Running a FastAPI Application
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#mainpy" class="md-nav__link">
    <span class="md-ellipsis">
      main.py
    </span>
  </a>
  
    <nav class="md-nav" aria-label="main.py">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#running-an-r-script" class="md-nav__link">
    <span class="md-ellipsis">
      Running an R Script
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#taskr" class="md-nav__link">
    <span class="md-ellipsis">
      task.R
    </span>
  </a>
  
    <nav class="md-nav" aria-label="task.R">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#running-a-python-script" class="md-nav__link">
    <span class="md-ellipsis">
      Running a Python Script
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#taskpy" class="md-nav__link">
    <span class="md-ellipsis">
      task.py
    </span>
  </a>
  
    <nav class="md-nav" aria-label="task.py">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#adding-more-workers" class="md-nav__link">
    <span class="md-ellipsis">
      Adding more workers
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#router-mode" class="md-nav__link">
    <span class="md-ellipsis">
      Router Mode
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Router Mode">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#routes" class="md-nav__link">
    <span class="md-ellipsis">
      Routes:
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#conclusion" class="md-nav__link">
    <span class="md-ellipsis">
      Conclusion
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../options/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Options
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../router/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Router Mode
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../in_containers/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    faucet in Containers
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../logging/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Logging
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../reverse_proxy/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    With Reverse Proxy
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../telemetry/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Telemetry
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../examples/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Examples
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../faq/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    FAQ
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#quick-start" class="md-nav__link">
    <span class="md-ellipsis">
      Quick Start
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#running-a-shiny-application" class="md-nav__link">
    <span class="md-ellipsis">
      Running a Shiny Application
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#running-a-quarto-application" class="md-nav__link">
    <span class="md-ellipsis">
      Running a Quarto Application
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#running-a-fastapi-application" class="md-nav__link">
    <span class="md-ellipsis">
      Running a FastAPI Application
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#mainpy" class="md-nav__link">
    <span class="md-ellipsis">
      main.py
    </span>
  </a>
  
    <nav class="md-nav" aria-label="main.py">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#running-an-r-script" class="md-nav__link">
    <span class="md-ellipsis">
      Running an R Script
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#taskr" class="md-nav__link">
    <span class="md-ellipsis">
      task.R
    </span>
  </a>
  
    <nav class="md-nav" aria-label="task.R">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#running-a-python-script" class="md-nav__link">
    <span class="md-ellipsis">
      Running a Python Script
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#taskpy" class="md-nav__link">
    <span class="md-ellipsis">
      task.py
    </span>
  </a>
  
    <nav class="md-nav" aria-label="task.py">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#adding-more-workers" class="md-nav__link">
    <span class="md-ellipsis">
      Adding more workers
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#router-mode" class="md-nav__link">
    <span class="md-ellipsis">
      Router Mode
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Router Mode">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#routes" class="md-nav__link">
    <span class="md-ellipsis">
      Routes:
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#conclusion" class="md-nav__link">
    <span class="md-ellipsis">
      Conclusion
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  
  


<h2 id="quick-start">Quick Start</h2>
<p>To use faucet, ensure that it is installed. If not, refer to the <a href="../install/">official installation documentation</a>.</p>
<p>Once installed, use the following command to start faucet with default settings:</p>
<pre><code class="language-bash"># Start faucet
faucet start
</code></pre>
<p>faucet will bind to <code>127.0.0.1:3838</code> and automatically determine the number of worker threads based on the number of CPUs on the host machine.</p>
<h2 id="running-a-shiny-application">Running a Shiny Application</h2>
<p>Let's create a simple Shiny application and deploy it using faucet.</p>
<ol>
<li>Create a basic Shiny app named <code>app.R</code>:</li>
</ol>
<pre><code class="language-R"># app.R
library(shiny)

ui &lt;- fluidPage(
  shinyOutput(&quot;hello&quot;)
)

server &lt;- function(input, output) {
  output$hello &lt;- renderText({
    &quot;Hello, faucet!&quot;
  })
}

shinyApp(ui, server)
</code></pre>
<ol>
<li>
<p>Save the above code in a file named <code>app.R</code>.</p>
</li>
<li>
<p>Start faucet in the same directory as your Shiny app:</p>
</li>
</ol>
<pre><code class="language-bash">faucet start
</code></pre>
<p>faucet will automatically detect the Shiny app and deploy it.</p>
<ol>
<li>Open your web browser and navigate to <a href="http://127.0.0.1:3838">http://127.0.0.1:3838</a> to see your Shiny app in action.</li>
</ol>
<h2 id="running-a-quarto-application">Running a Quarto Application</h2>
<p>To run a Quarto application using faucet, follow these steps:</p>
<ol>
<li>
<p>Ensure you have a Quarto document file, e.g., <code>example.qmd</code>.</p>
</li>
<li>
<p>In the same directory as your Quarto document, start faucet with the Quarto settings:</p>
</li>
</ol>
<pre><code class="language-bash">faucet start --qmd example.qmd --type quarto-shiny
</code></pre>
<p>All other arguments still persist and can be customized as needed.</p>
<p>faucet will deploy the Quarto document as a Shiny application.</p>
<ol>
<li>Open your web browser and navigate to <a href="http://127.0.0.1:3838">http://127.0.0.1:3838</a> to see your Quarto app in action.</li>
</ol>
<h2 id="running-a-fastapi-application">Running a FastAPI Application</h2>
<p>faucet can also serve Python applications built with FastAPI. This feature relies on <code>uv</code> being available in your system's <code>PATH</code>.</p>
<ol>
<li>
<p>Create a simple FastAPI application. Create a file named <code>main.py</code> in your project directory:</p>
<p>```python</p>
<h1 id="mainpy">main.py</h1>
<p>from fastapi import FastAPI</p>
<p>app = FastAPI()</p>
<p>@app.get("/")
def read_root():
    return {"Hello": "Faucet"}
```</p>
</li>
<li>
<p>You will need <code>uvicorn</code> and <code>fastapi</code> in your Python environment. If you are using <code>uv</code>, you can install them with:</p>
<p><code>bash
uv pip install fastapi uvicorn</code></p>
</li>
<li>
<p>Start faucet and point it to your FastAPI application:</p>
<p><code>bash
faucet start --type fast-api --dir .</code>
faucet will look for a <code>main.py</code> file in the specified directory, and then serve it using <code>uv run uvicorn main:app</code>.</p>
</li>
<li>
<p>Open your web browser and navigate to <a href="http://127.0.0.1:3838">http://127.0.0.1:3838</a> to see your FastAPI app's response.</p>
</li>
</ol>
<h2 id="running-an-r-script">Running an R Script</h2>
<p>You can run arbitrary R scripts using the <code>rscript</code> subcommand. Faucet will manage the execution of the script.</p>
<ol>
<li>
<p>Create an R script, for example <code>task.R</code>:</p>
<p>```R</p>
<h1 id="taskr">task.R</h1>
<p>print("Executing a task in R.")
Sys.sleep(5)
print("Task finished.")
```</p>
</li>
<li>
<p>Execute the script using faucet:</p>
<p><code>bash
faucet rscript task.R</code>
This will run <code>Rscript task.R</code> under faucet's management. You can pass any arguments to your script as you normally would.</p>
</li>
</ol>
<h2 id="running-a-python-script">Running a Python Script</h2>
<p>Similarly, you can run Python scripts or any <code>uv</code> command using the <code>uv</code> subcommand. This requires <code>uv</code> to be installed and available in your <code>PATH</code>.</p>
<ol>
<li>
<p>Create a Python script, for example <code>task.py</code>:</p>
<p>```python</p>
<h1 id="taskpy">task.py</h1>
<p>import time
print("Executing a task in Python.")
time.sleep(5)
print("Task finished.")
```</p>
</li>
<li>
<p>Execute the script using faucet:</p>
<p><code>bash
faucet uv run task.py</code>
This will execute <code>uv run task.py</code>. Any arguments can be passed to <code>uv</code>. For example, to install a package into the current environment:</p>
<p><code>bash
faucet uv pip install requests</code></p>
</li>
</ol>
<h3 id="adding-more-workers">Adding more workers</h3>
<p>If your computer has more than one CPU core, then you probably saw that
many workers were created when you started faucet. This is because faucet
automatically detects the number of CPU cores on your computer and creates
a worker for each core.</p>
<p>To know how many CPU cores you have, you can run:</p>
<pre><code class="language-bash">faucet start -- help
</code></pre>
<p>In the output, look for the flag -w, --workers <WORKERS>. The default number is set to the number of CPU cores detected by Faucet.</p>
<p>You can customize the number of workers by using the <code>--workers</code> flag:</p>
<pre><code class="language-bash">faucet start --workers 4
</code></pre>
<p>Or by setting the <code>FAUCET_WORKERS</code> environment variable:</p>
<pre><code class="language-bash">export FAUCET_WORKERS=4
faucet start
</code></pre>
<p>In both cases, faucet will create 4 workers on random available ports.
Traffic will be load balanced across all workers according to the
IP address of the incoming request. This means that if you have 4 workers,
then you can handle 4 times as many concurrent requests as a single worker.</p>
<h3 id="router-mode">Router Mode</h3>
<p><strong>When to use Router?</strong></p>
<ul>
<li>
<p><strong>Multiple Applications:</strong> Use Router mode when you need to deploy and manage multiple applications on different routes but on the same port.</p>
</li>
<li>
<p><strong>Centralized Management:</strong> If you desire a centralized configuration to route requests to the corresponding applications based on the route, Router is the appropriate option.</p>
</li>
<li>
<p><strong>Resource Optimization:</strong> Router facilitates the management and scalability of various applications by allowing an efficient distribution of requests.</p>
</li>
</ul>
<p>To start faucet in Router mode, we first need a configuration file where the router logic <code>frouter.toml</code> will be placed. The configuration file must be in the root of the working directory where you want to run the applications.</p>
<p><em>Note: Remember that faucet router automatically detects the app.R (Shiny) file, so if there are many Shiny applications, we must specify the folder where that app.R file is located.</em></p>
<p>To better explain the configuration, we have an example repository called <a href="https://github.com/ixpantia/faucet-router-example">faucet-router-example</a>. This repository has different applications (Quarto, Shiny, and Plumber) in separate folders.</p>
<pre><code class="language-bash">│   .gitignore
│   faucet-router-example.Rproj
│   frouter.toml
│   README.md
│
│
│   app.R
│
├───sliders
│       app.R
│
└───text
│        app.R
├───api
│       plumber.R
│
├───qmd
│   │   old_faithful.qmd
│
├───py-api
│   │   main.py
</code></pre>
<p>Example <code>frouter.toml</code>:</p>
<pre><code class="language-toml"># By default, the `workdir` and `app_dir`
# is `.` (Here). If not specified,
# runs the application in the current directory.
[[route]]
route = &quot;/&quot;
workers = 1
server_type = &quot;Shiny&quot;


# In this route, we use `workdir` to start the secondary
# R session in a different working directory.
[[route]]
route = &quot;/sliders/&quot;
workers = 1
server_type = &quot;Shiny&quot;
workdir = &quot;./sliders&quot;


# In this route, we use `app_dir` to start the R session
# in the current working directory but use an application in
# a directory.
[[route]]
route = &quot;/text/&quot;
workers = 1
server_type = &quot;Shiny&quot;
app_dir = &quot;./text&quot;


# Demonstration of how to serve a Plumber API
[[route]]
route = &quot;/api/&quot;
workers = 1
server_type = &quot;Plumber&quot;
workdir = &quot;./api&quot;


# Demonstration of how to serve a Quarto Shiny application
[[route]]
route = &quot;/qmd/&quot;
workers = 1
server_type = &quot;QuartoShiny&quot;
workdir = &quot;./qmd&quot;
qmd = &quot;old_faithful.qmd&quot;

# Demonstration of how to serve a FastAPI application
[[route]]
route = &quot;/py-api/&quot;
workers = 1
server_type = &quot;FastAPI&quot;
workdir = &quot;./py-api&quot;
</code></pre>
<p>The <code>server_type</code> argument defines the type of application you want to deploy; currently, we have: <code>QuartoShiny</code>, <code>Shiny</code>, <code>Plumber</code>, and <code>FastAPI</code>.</p>
<p>In the same configuration file <code>frouter.toml</code>, we can define the number of <code>workers</code> that each application needs.</p>
<p>Now, to start faucet in Router mode:</p>
<pre><code class="language-sh">faucet router
</code></pre>
<h4 id="routes">Routes:</h4>
<p>All the applications will be on the same port but with different routes, according to the configuration file.</p>
<ul>
<li>Hello Shiny [<code>/</code>]: <a href="http://localhost:3838"><code>http://localhost:3838</code></a></li>
<li>Sliders Shiny [<code>/sliders/</code>]: <a href="http://localhost:3838/sliders/"><code>http://localhost:3838/sliders/</code></a></li>
<li>Text Shiny [<code>/text/</code>]: <a href="http://localhost:3838/text/"><code>http://localhost:3838/text/</code></a></li>
<li>Plumber API [<code>/api/</code>]: <a href="http://localhost:3838/api/__docs__/"><code>http://localhost:3838/api/__docs__/</code></a></li>
<li>Quarto Shiny App [<code>/qmd/</code>]: <a href="http://localhost:3838/qmd/"><code>http://localhost:3838/qmd/</code></a></li>
<li>FastAPI App [<code>/py-api/</code>]: <a href="http://localhost:3838/py-api/"><code>http://localhost:3838/py-api/</code></a></li>
</ul>
<h2 id="conclusion">Conclusion</h2>
<p>Congratulations! You have successfully started using faucet and deployed a
basic Shiny application with many workers.</p>
<p>Happy coding with faucet!</p>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "..", "features": ["content.code.copy"], "search": "../assets/javascripts/workers/search.b8dbb3d2.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../assets/javascripts/bundle.8fd75fb4.min.js"></script>
      
    
  </body>
</html>